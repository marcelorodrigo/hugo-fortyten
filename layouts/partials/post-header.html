<div class="mb-6 pb-6 border-b border-orange-200 dark:border-orange-900">
  {{ $page := . }}
  {{ with $page.Params.image }}
    <div class="relative w-full h-64 sm:h-80 rounded-lg border border-gray-200 dark:border-gray-700 mb-6 overflow-hidden group flex flex-col justify-end">
      <img src="{{ . }}" alt="{{ $page.Title }}" class="absolute inset-0 w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-300" loading="lazy">
      <div class="absolute inset-0 bg-gradient-to-b from-transparent to-white dark:to-gray-800 pointer-events-none"></div>
      
      <!-- Content overlay -->
      <div class="relative z-20 px-6 pb-6 flex flex-col gap-4">
        <!-- Tags -->
        {{ if $page.Params.tags }}
          <div class="flex flex-wrap gap-2" role="list" aria-label="Post tags">
            {{ range $page.Params.tags }}
              <a href="{{ (path.Join "tags" . | relURL) }}" class="inline-block bg-orange-100 dark:bg-orange-900 text-orange-900 dark:text-orange-200 px-3 py-1 rounded-full text-sm font-medium transition-all duration-200 hover:bg-orange-300 dark:hover:bg-orange-800 hover:shadow-md hover:scale-105" rel="tag" role="listitem" aria-label="View all posts tagged with {{ . }}">{{ . }}</a>
            {{ end }}
          </div>
        {{ end }}

        <!-- Title -->
        <h1 class="text-3xl md:text-4xl font-extrabold leading-tight tracking-tight text-gray-900 dark:text-gray-100">{{ $page.Title }}</h1>

        <!-- Date and reading time -->
        <div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-gray-700 dark:text-gray-300 text-sm">
          {{ $dateMachine := $page.Date | time.Format "2006-01-02T15:04:05-07:00" }}
          {{ $dateHuman := $page.Date | time.Format ":date_long" }}
          <time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>
          {{ if gt $page.ReadingTime 0 }}
            <span aria-label="Estimated reading time">· {{ $page.ReadingTime }} min read</span>
          {{ end }}
        </div>
      </div>
    </div>
  {{ end }}

  {{ if not $page.Params.image }}
    <!-- Fallback layout without image -->
    {{ if $page.Params.tags }}
      <div class="flex flex-wrap gap-2 mb-4" role="list" aria-label="Post tags">
        {{ range $page.Params.tags }}
          <a href="{{ (path.Join "tags" . | relURL) }}" class="inline-block bg-orange-100 dark:bg-orange-900 text-orange-900 dark:text-orange-200 px-3 py-1 rounded-full text-sm font-medium transition-all duration-200 hover:bg-orange-300 dark:hover:bg-orange-800 hover:shadow-md hover:scale-105" rel="tag" role="listitem" aria-label="View all posts tagged with {{ . }}">{{ . }}</a>
        {{ end }}
      </div>
    {{ end }}

    <h1 class="text-3xl md:text-4xl font-extrabold leading-tight tracking-tight text-gray-900 dark:text-gray-100 mb-4">{{ $page.Title }}</h1>

    <div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-gray-500 dark:text-gray-400 text-sm mb-2">
      {{ $dateMachine := $page.Date | time.Format "2006-01-02T15:04:05-07:00" }}
      {{ $dateHuman := $page.Date | time.Format ":date_long" }}
      <time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>
      {{ if gt $page.ReadingTime 0 }}
        <span aria-label="Estimated reading time">· {{ $page.ReadingTime }} min read</span>
      {{ end }}
    </div>
  {{ end }}

</div>
