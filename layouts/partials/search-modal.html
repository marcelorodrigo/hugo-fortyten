{{- /*
Search Modal Component

Renders a modal dialog for site-wide search functionality.
Uses the native <dialog> element for better accessibility and simpler code.

Features:
- Native dialog with ::backdrop styling
- Search input with autofocus on open
- Results display with title and summary
- Close via X button, ESC key (built-in), or clicking backdrop
- Keyboard navigation support

@context none (standalone partial)
*/ -}}

<dialog id="search-modal" class="mx-auto w-full max-w-2xl rounded-xl bg-white p-0 shadow-2xl ring-1 ring-black/5 backdrop:bg-black/50 backdrop:backdrop-blur-sm">
  {{- /* Header with search input and close button */ -}}
  <div class="relative flex items-center border-b border-gray-200">
    <ion-icon name="search" class="pointer-events-none absolute left-4 text-gray-400 text-xl" aria-hidden="true"></ion-icon>
    <input
      type="text"
      id="search-input"
      class="h-14 w-full border-0 bg-transparent pl-12 pr-14 text-gray-900 placeholder:text-gray-400 focus:ring-0 focus:outline-none text-base"
      placeholder="Search pages..."
      aria-label="Search pages"
      aria-controls="search-results"
      aria-autocomplete="list"
      autocomplete="off"
      spellcheck="false"
    >
    <button
      type="button"
      id="search-close"
      class="absolute right-3 p-1.5 text-gray-400 hover:text-gray-600 transition rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-sky-500"
      aria-label="Close search"
    >
      <ion-icon name="close" class="text-xl" aria-hidden="true"></ion-icon>
    </button>
  </div>
  
  {{- /* Results container */ -}}
  <div id="search-results-container" class="max-h-[60vh] overflow-y-auto">
    {{- /* Results list */ -}}
    <ul id="search-results" role="listbox" class="divide-y divide-gray-100 p-2">
      {{- /* Results populated by JavaScript */ -}}
    </ul>
    
    {{- /* No results message */ -}}
    <div id="search-no-results" class="hidden px-4 py-14 text-center">
      <ion-icon name="search-outline" class="mx-auto text-4xl text-gray-400" aria-hidden="true"></ion-icon>
      <p class="mt-4 text-sm text-gray-600">No results found. Try a different search term.</p>
    </div>
    
    {{- /* Loading state */ -}}
    <div id="search-loading" class="hidden px-4 py-14 text-center">
      <ion-icon name="reload" class="mx-auto text-4xl text-gray-400 animate-spin" aria-hidden="true"></ion-icon>
      <p class="mt-4 text-sm text-gray-600">Loading search index...</p>
    </div>
  </div>
  
  {{- /* Footer with keyboard hints */ -}}
  <div class="flex items-center justify-end gap-4 border-t border-gray-200 px-4 py-2.5 text-xs text-gray-500">
    <span class="flex items-center gap-1">
      <kbd class="rounded border border-gray-300 bg-gray-50 px-1.5 py-0.5 font-mono text-xs">Esc</kbd>
      <span>to close</span>
    </span>
    <span class="flex items-center gap-1">
      <kbd class="rounded border border-gray-300 bg-gray-50 px-1.5 py-0.5 font-mono text-xs">Enter</kbd>
      <span>to select</span>
    </span>
  </div>
</dialog>
